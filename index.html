<!doctype html>
<html>
<head>
<meta charset="utf-8">
    
<link href="css/animate.css" rel="stylesheet" type="text/css">
<link href="css/materialize.css" rel="stylesheet" type="text/css">
<link href="css/main.css" rel="stylesheet" type="text/css">
    
<link href="css/toast.css" rel="stylesheet" type="text/css">
    
<script src="js/jquery.min.js"></script>
    
<script src="js/map.js"></script>
    
<script src="js/chat.js"></script>
<script src="js/logupdate.js"></script>

<script src="cordova.js"></script>
<script src="js/materialize.js"></script>
<script src="js/preventreload.js"></script>
<script src="responsivevoice.js"></script>
<script src="js/main.js"></script>
<script src="js/corporate.js"></script>
    
<script src="js/toast.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

<script type="text/javascript">

function distance(lat1, lon1, lat2, lon2) {
  var p = 0.017453292519943295;    // Math.PI / 180
  var c = Math.cos;
  var a = 0.5 - c((lat2 - lat1) * p)/2 + 
          c(lat1 * p) * c(lat2 * p) * 
          (1 - c((lon2 - lon1) * p))/2;

  return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km
}
    
function showindicator() {
document.getElementById("loadingindicator").className = "animated fadeIn";
document.getElementById("loadingindicator").style.display = "block";
}
function hideindicator() {
document.getElementById("loadingindicator").className = "animated fadeOut";
setTimeout(function(){
document.getElementById("loadingindicator").style.display = "none";
}, 1000);
}
    
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
brightness.setKeepScreenOn(true);
screen.lockOrientation('portrait');
}

$(document).ready(function() {
    
// Resets
localStorage.removeItem("request_accepted");
localStorage.removeItem("passenger_detailed_location_instructions");
    
$.get( "http://250taxi.com/db/partner/check_app_update.php?check=driver",  function( data ) {
    var currentversion = "1";
    var serverversion = data;
    if (currentversion < serverversion) {
        alert("Your app is outdated. Please install the update.");
        window.open('http://250taxi.com/getupdate/driver.php', '_system');
    }
});
    
    $('select').material_select();
});

</script>
    
<script>
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
    screen.lockOrientation('portrait');
    document.addEventListener("backbutton", function (e) {
        e.preventDefault();
    }, false );
}
</script>
    
    
    
    
<script>
$( document ).ready(function() {

if (localStorage.getItem("language") === null) {
    localStorage.setItem("language","lang_english");
}

checklang();
});

function checklang() {

lang = localStorage.getItem('language');
    
console.log(lang);
    
var x = document.getElementsByClassName("english");
var i;
for (i = 0; i < x.length; i++) {
    x[i].className = "english lang_show";
}
var x = document.getElementsByClassName("rwanda");
var i;
for (i = 0; i < x.length; i++) {
    x[i].className = "rwanda lang_show";
}

if(lang == 'lang_kinyarwanda') {
	$(".rwanda").removeClass("lang_show");
}
if(lang == 'lang_english') {
	$(".english").removeClass("lang_show");
}
else if(lang == '') {
    $(".english").removeClass("lang_show");
    localStorage.setItem("language","lang_english");
}

}

$( document ).ready(function() {
$( "#language_type" ).change(function() {

    language_type = document.getElementById('language_type').value;
    localStorage.setItem("language",language_type);
    
    if (language_type == "lang_english") {
        checklang();
        localStorage.setItem('toast','English');toast();
        document.getElementById("language_flag").src = "img/en.png";
        setTimeout(function(){
        document.getElementById("select_language").className = "animated zoomOut";
        }, 2000);
        setTimeout(function(){
        document.getElementById("select_language").style.display = "none";
        }, 3500);
    }
    if (language_type == "lang_kinyarwanda") {
        checklang();
        localStorage.setItem('toast','Kinyarwanda');toast();
        document.getElementById("language_flag").src = "img/rw.png";
        setTimeout(function(){
        document.getElementById("select_language").className = "animated zoomOut";
        }, 2000);
        setTimeout(function(){
        document.getElementById("select_language").style.display = "none";
        }, 3500);
    }
});
});

function show_language_picker() {
    setTimeout(function(){
        document.getElementById("select_language").className = "animated zoomIn";
        document.getElementById("select_language").style.display = "block";
    }, 500);
}
</script>
    
    

</head>

<body id="body">
    
<div id="loadingindicator">
<img src="img/282.gif" width="120">
</div>
    
    
    
    
 
<div id="select_language">
    
<img class="animated zoomIn" style="width: 40%; margin-top: 10%; max-width: 200px;" src="icon.png">

<div class="animated fadeIn" style="padding:20px;">
<div class="row">
<div class="col s4">
<img class="animated fadeIn" style="width: 100%; margin-top: 23%; max-width: 200px;" id="language_flag" src="img/flag.png">
</div>
<div class="input-field col s8">
    <select id="language_type" required="" aria-required="true">
        <option value="" disabled selected>Language</option>
        <option value="lang_english">English</option>
        <option value="lang_kinyarwanda">Kinyarwanda</option>
    </select>
</div>
</div>
    

    
</div>
    
</div>    
    
    
<div id="view_start">
<img id="logo" src="icon.png">
<br><br>
<span class="lang_show english">
<a id="login_btn" class="waves-effect waves-light btn taxi250">
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M10,17.25V14H3V10H10V6.75L15.25,12L10,17.25M8,2H17A2,2 0 0,1 19,4V20A2,2 0 0,1 17,22H8A2,2 0 0,1 6,20V16H8V20H17V4H8V8H6V4A2,2 0 0,1 8,2Z" />
</svg>    
    Partner-Login
</a></span>
    
<span class="lang_show rwanda">
 <a id="login_btn_rwanda" class="waves-effect waves-light btn_rwanda taxi250">   
   <svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M10,17.25V14H3V10H10V6.75L15.25,12L10,17.25M8,2H17A2,2 0 0,1 19,4V20A2,2 0 0,1 17,22H8A2,2 0 0,1 6,20V16H8V20H17V4H8V8H6V4A2,2 0 0,1 8,2Z" />
</svg> KWINJIRA KWABAFATANYABIKORWA
</a>
</span>

<br><br>
<a id="login_btn_register" class="waves-effect waves-light btn taxi250">
    
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z" />
</svg>
    
    
    <span class="lang_show english">Register</span>
    <span class="lang_show rwanda">IYANDIKISHE</span>
    
    </a>
<br><br>
<span style="display:none;">
<a href="qr/index.html" class="waves-effect waves-dark btn white grey-text">QR Test</a>
</span>
<a onclick="show_language_picker();" id="login_btn_language" class="waves-effect waves-light btn taxi250">
   <svg style="width:24px;height:24px;vertical-align: middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M17.9,17.39C17.64,16.59 16.89,16 16,16H15V13A1,1 0 0,0 14,12H8V10H10A1,1 0 0,0 11,9V7H13A2,2 0 0,0 15,5V4.59C17.93,5.77 20,8.64 20,12C20,14.08 19.2,15.97 17.9,17.39M11,19.93C7.05,19.44 4,16.08 4,12C4,11.38 4.08,10.78 4.21,10.21L9,15V16A2,2 0 0,0 11,18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
</svg> Language
</a> 
<br><br>
<a id="login_btn_corporate" class="waves-effect waves-dark btn white grey-text">
    
    <span class="lang_show english">Hotel / Corporate</span>
    <span class="lang_show rwanda">AMAHOTELI / IBIGO</span>
    
</a>


</div>
    
<div id="view_login">
    
<form id="login_form" action="javascript:login_form_go();" class="col s12">
    
<div class="row">
      <div class="col s12">
        <div class="card-panel white">

<div class="arrow_back" onclick="back_to_start();">
<svg style="width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#000000" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
</svg>
</div>
          
<div class="input-field col s12">
    <select id="partner_type" required="" aria-required="true">
      <option value="" disabled selected>Choose partner type</option>
      <option value="TX_">Taxi</option>
      <option value="CR_">Courier</option>
      <option value="MO_">Moto</option>
    </select>
</div>
            
<div class="input-field col s12">
          <input id="id_no" type="text" required="" aria-required="true" class="validate">
          <label for="id_no">ID Number / Username</label>
</div>
    
<a id="login_btn_go" class="waves-effect waves-light btn taxi250">Login</a>
            
        </div>
      </div>
    </div>
    
    </form>
    
<div class="row">
      <div class="col s12">
        <div class="card-panel white">
        <img id="scan_qr" src="img/scan_qr.png">
          <a id="login_btn_qr" class="waves-effect waves-light btn taxi250" onclick="scancode();">Scan QR-Code</a>  
        </div>
      </div>
    </div>
    
</div>
    
<div id="view_taxi_waiting" style="display:none;">
    
<style>
#radar, #radar_offline {
    background-color: black;
    width: 100%;
    color: white;
}
.infobox {
    background-image: url(img/information-outline.svg);
    background-repeat: no-repeat;
    background-size: auto 80%;
    background-position: 3% center;
    padding-left: 60px;
    padding-top: 5px;
    padding-bottom: 5px;
    text-align: left;
    background-color: white;
}
#loadingindicator {
    filter: invert(100%);
    -webkit-filter: invert(100%);
	background-color: #E2E2E2;
	position: absolute;
	z-index: 100;
	height: 100%;
	width: 100%;
	left: 0px;
	top: 0px;
	text-align: center;
}
#loadingindicator img {
	margin-top: 100px;
	width: 160px;
}
#view_taxi_journeyaccepted {
    display: none;
}
</style>
    
    
    <div id="radar"><br>
    <img src="img/220.gif" style="width:60%;max-width:300px;"><br>
        

<span class="lang_show english">Waiting for passengers...<br>You are visible!</span>
<span class="lang_show rwanda">UTEGEREJE ABAGENZI<br>URAGARAGARA</span>
        
        
        
        
        
        <br><br>
    <div id="behind_radar"></div>
    </div>
    
    <div id="radar_offline" style="display:none;"><br>
    <img src="img/offline.png" style="width:60%;max-width:300px;"><br>
        
<span class="lang_show english">You aren't visible.<br>Passengers can't find you!</span>
<span class="lang_show rwanda">UTEGEREJE ABAGENZI<br>NTUGARAGARA</span>       
        
        <br><br>
    <div id="behind_radar_offline"></div>
    </div>
    
    <div class="infobox">
        
<span class="lang_show english">The app has to stay open for best performance</span>
<span class="lang_show rwanda">IYI APILIKASIYO IGOMBA GUHORA IFUNGUYE KUGIRA NGO IKORE NEZA</span>
        
    
    </div>
    


<script>
    $(document).ready(function() {
        
    hideindicator();
        
    var play_choice = localStorage.getItem("play_choice");
        
    console.log("Play Hey Taxi?: " + play_choice);
        
    if (play_choice == "Yes") { 
    $( "#play_choice_checkbox").prop('checked', true);
    }
    else if (play_choice == "No") { 
    $( "#play_choice_checkbox").prop('checked', false);
    }

        $( "#play_choice_checkbox" ).click(function() {

        var play_choice_checkboxValue = document.getElementById('play_choice_checkbox').checked;
    
        if (play_choice_checkboxValue == false) {
            localStorage.setItem("play_choice","No");
        }
        if (play_choice_checkboxValue == true) {
            localStorage.setItem("play_choice","Yes");
        }

        });
        

    
    
        
    $( "#toggle_online_checkbox").prop('checked', true);
        localStorage.setItem("status", "online");
        
        $( "#toggle_online" ).click(function() {
        var toggle_online_checkedValue = document.getElementById('toggle_online_checkbox').checked;
        localStorage.setItem("toggle_online",toggle_online_checkedValue);
        set_online_status();
        });
    });
    
    function set_online_status() {
        var toggle_online = localStorage.getItem("toggle_online");
        // alert(toggle_online);
        if (toggle_online == "false") {
            document.getElementById("radar_offline").style.display = "block";
            document.getElementById("radar").style.display = "none";
            localStorage.setItem("status", "offline");
        }
        if (toggle_online == "true") {
            document.getElementById("radar_offline").style.display = "none";
            document.getElementById("radar").style.display = "block";
            localStorage.setItem("status", "online");
        }
            
    }
    

    
function getLocationUpdate(){
navigator.geolocation.getCurrentPosition(showPosition);
}
    
function showPosition(position) {
    latitude = position.coords.latitude;
    longitude = position.coords.longitude;

    console.log("Driver Location");
    console.log(latitude);
    console.log(longitude);  
    
var passenger_detailed_location_instructions = localStorage.getItem("passenger_detailed_location_instructions");

if (passenger_detailed_location_instructions == "Yes") {
    
$.get( "http://250taxi.com/db/partner/taxi_comlink_passenger_details.php?task=getpassengername&id_no="+id_no+"",  function( data ) {
    
journeyrequest_passenger_name = data;
    
document.getElementById("journeyrequest_passenger_name").innerHTML = journeyrequest_passenger_name;
    


var ja_client_instructions = document.getElementById("passenger_detailed_location").innerHTML;
    
console.log("Detailed Instructions:" + ja_client_instructions);

ja_client_instructions_length = ja_client_instructions.length;

if (ja_client_instructions_length < 1) {
document.getElementById("ja_client_instructions").innerHTML = "Not given"  
}
if (ja_client_instructions_length > 1) {
document.getElementById("ja_client_instructions").innerHTML = ja_client_instructions;
}
    
});
    
}
    
status = localStorage.getItem("status");
    
var loggedin = localStorage.getItem('loggedin');
    
if (loggedin == 'Yes') {
    id_no = localStorage.getItem("id_no");
}

    $.get( "http://250taxi.com/db/partner/taxi_comlink.php?id_no="+id_no+"&status="+status+"&latitude="+latitude+"&longitude="+longitude+"", function( data ) {
        
// console.log(data);

var d1 = data.substring(0,1);
var d2 = data.substring(1);
        
// console.log("d1: "+d1+" d2: "+d2+"");
console.log("d1: "+d1+"\nd2: "+d2+"");
        
// No passenger request - Show waiting screen
if (d1 == "0") {
    $( "#view_taxi_waiting" ).fadeIn( "slow", function() {
        $( "#view_taxi_journeyrequest" ).fadeOut( "slow", function() {
            document.getElementById("journeyrequest_passenger_cards").className = "row";
        });
  });
}
        
// Request cancelled
if (d1 == "2") {
    $.get( "http://250taxi.com/db/partner/taxi_comlink_journey.php?task=cancel_reason&id_no="+id_no+"",  function( data ) {
        
    // alert(data);
        
    if (data == "driver_late") {
        localStorage.setItem("cancel_reason","Journey cancelled by passenger. Reason: Driver was late!");
        request_cancelled();
    }
    if (data == "cant_track") {
        localStorage.setItem("cancel_reason","Journey cancelled by passenger. Reason: Can't track driver!");
        request_cancelled();
    }
    if (data == "cant_reach") {
        localStorage.setItem("cancel_reason","Journey cancelled by passenger. Reason: Can't reach driver");
        request_cancelled();
    }
    else if (data == "null") {
        localStorage.setItem("cancel_reason","Journey cancelled by passenger. No reason given.");
        request_cancelled();
    }
    else if (data == null) {
        localStorage.setItem("cancel_reason","Journey cancelled by passenger. No reason given.");
        request_cancelled();
    }
    else if (data == "") {
        localStorage.setItem("cancel_reason","Journey cancelled by passenger. No reason given.");
        request_cancelled();
    }
    else {
        localStorage.setItem("cancel_reason","Journey cancelled by passenger. "+data+"");
        request_cancelled();
    }

    });
} 
function request_cancelled() {
  
showindicator();
    
var cancel_reason = localStorage.getItem("cancel_reason");
localStorage.setItem('toast',''+cancel_reason+'');toast();

$.get( "http://250taxi.com/db/partner/taxi_comlink_journey.php?task=cancelled&id_no="+id_no+"",  function( data ) {
            
setTimeout(function(){ 
location.reload();
}, 8000);

        });
}

// Passenger has requested journey - Get details and show options
        
var request_accepted = localStorage.getItem("request_accepted");

if (request_accepted == "Yes") {
    
}
else {
if (d1 == "1") {
    $( "#view_taxi_waiting" ).fadeOut( "slow", function() {
    $( "#view_taxi_journeyrequest" ).fadeIn();
    document.getElementById("journeyrequest_passenger_cards").className = "row animated zoomIn";
    });
    
    $.get( "http://250taxi.com/db/partner/taxi_comlink_passenger_details.php?task=getpassengername&id_no="+id_no+"",  function( data ) {
        
journeyrequest_passenger_name = data;

document.getElementById("journeyrequest_passenger_name").innerHTML = journeyrequest_passenger_name;
        

        
passenger_id = document.getElementById("passenger_id").innerHTML;
// alert(passenger_id);
        
console.log("Passenger Location");
passenger_gps_lat = document.getElementById("passenger_gps_lat").innerHTML;
console.log(passenger_gps_lat);        
passenger_gps_long = document.getElementById("passenger_gps_long").innerHTML;
console.log(passenger_gps_long);
        
// Calculate Distance Driver Passenger
       
var driver_client_distance = distance(passenger_gps_lat,passenger_gps_long,latitude,longitude);
var driver_client_distance = parseFloat(driver_client_distance).toFixed(2);

console.log("Distance: "+driver_client_distance+" km");
        
document.getElementById("driver_client_distance").innerHTML = driver_client_distance;
        
        
        
        
$('<img src="https://maps.googleapis.com/maps/api/staticmap?center='+passenger_gps_lat+','+passenger_gps_long+'&zoom=15&size=600x600&maptype=roadmap&markers=color:blue%7Clabel:P%7C'+passenger_gps_lat+','+passenger_gps_long+'&key=AIzaSyDb1A29Jk9FtTZSiHDlfUPM9mHM42cAiRo">').load(function() {
    $("#passenger_on_map").empty();
    $(this).appendTo('#passenger_on_map');
});
        


var myAudio = document.getElementById("snd_hey_taxi");
var play_choice = localStorage.getItem("play_choice");

if (play_choice == "Yes") {
myAudio.play();
}
        
});

}
    
}

});
}

function myTimer() {
    
getLocationUpdate();

}

</script>
    
    <br>

    <div class="row">
      <div class="col s12">
        <div class="card-panel white">
          <span class="black-text">
              
<span class="lang_show english">Choose if you are visible to passengers</span>
<span class="lang_show rwanda">HITAMO NIBA UGARAGARA KUBA GENZI</span>   
              
<br><br>
    <!-- Switch -->
  <div id="toggle_online" class="switch">
    <label>
        
        <span class="lang_show english">Hidden</span>
<span class="lang_show rwanda">NTUGARAGARA</span>
        
      
        
      <input id="toggle_online_checkbox" type="checkbox">
      <span class="lever"></span>
        
      
        
            <span class="lang_show english">Visible</span>
<span class="lang_show rwanda">URAGARAGARA</span>
        
    </label>
  </div>
    <br>
              
<span class="lang_show english">Play a sound when a passenger calls you</span>
<span class="lang_show rwanda">GUKINA UMUZIKI UMUGENZIAHAMAGAYE</span>            
              

<br><br>
    <input type="checkbox" class="filled-in" id="play_choice_checkbox" checked="checked" />
    <label for="play_choice_checkbox">Play <i>Hey Taxi!</i></label>
              
          </span>
        </div>
      </div>
    </div>




<a onclick="logout_confirm();" class="waves-effect waves-light btn red">
    
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M17,17.25V14H10V10H17V6.75L22.25,12L17,17.25M13,2A2,2 0 0,1 15,4V8H13V4H4V20H13V16H15V20A2,2 0 0,1 13,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2H13Z" />
</svg> 

<span class="lang_show english">Logout</span>
<span class="lang_show rwanda">SOHOKAMO</span>
 
<span id="driver_name"></span></a>
    
<script>
function logout_confirm() {
    
showindicator();

var logout_confirm = confirm("Are you sure you want to log out?");
if (logout_confirm == true) {
    localStorage.setItem("status", "offline");
    localStorage.removeItem('loggedin');
    responsiveVoice.speak("Goodbye, see you again soon!", "UK English Male");
    
    setTimeout(function(){ 
                goodbye()
    }, 3000);
    
    function goodbye() {
       location.reload(); 
    }
} else {
    hideindicator();
    return;
}
}    
</script>
    
</div>
    

    

<style>
    #journeyrequest_passenger_name {
        text-transform: uppercase;
    }    
</style>

<div id="view_taxi_journeyrequest" style="display:none; margin-top: 3px;">
    
<audio id="snd_hey_taxi" style="display:none;" src="http://250taxi.com/sounds/callcab.mp3"></audio>
    
    <div id="journeyrequest_passenger_cards" class="row">
        <div class="col s12">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">
                  
                  
<span class="lang_show english">Journey Request</span>
<span class="lang_show rwanda">SABA URUGENDO</span>
                  
                  
                
                </span>
                
              <div id="journeyrequest_passenger_name"></div>
                
                <br>
                
                <span class="lang_show english">PICK UP LOCATION: </span>
<span class="lang_show rwanda">AHO UFATIRA UMUGENZI: </span>
                
                <span id="driver_client_distance"></span> km
              
            </div>
            <div class="card-action">
              <a onclick="request_accept();" href="#">
                  
                  <span class="lang_show english">Accept</span>
<span class="lang_show rwanda">EMEZA</span>
                  
                  
                
                </a>
              <a onclick="request_decline();" href="#">
                  
                  <span class="lang_show english">Decline</span>
<span class="lang_show rwanda">HAKANA</span>
                  
                  
                
                </a>
            </div>
          </div>
        </div>
      </div>
    
    <style>
        #passenger_on_map img {
            width: 100%;
        }
    </style>
    
</div>
    
<script>
    function request_accept() {
        
    chatloader();
    
    // Location loop should check for additional instructions
    localStorage.setItem("passenger_detailed_location_instructions","Yes");
        
       var passenger_id = document.getElementById("passenger_id").innerHTML;
    
        localStorage.setItem("request_accepted","Yes");
        
        document.getElementById("ja_client_destination").innerHTML = document.getElementById("passenger_destination").innerHTML;
        
        phone = document.getElementById("passenger_phone").innerHTML;
        
        phone = phone.trim();
        
        phone_length = phone.length;
        // alert(phone_length);
        if (phone_length > 5) {
            document.getElementById("phone_button").style.display = "inline";
            $( "#phone_button_tel" ).attr("href", "tel:+"+phone+"");
        }
        
       $.get( "http://250taxi.com/db/partner/taxi_comlink_journey.php?task=accept&passenger_id="+passenger_id+"",  function( data ) {
            
           $( "#view_taxi_journeyrequest" ).fadeOut( "slow", function() {
            $( "#view_taxi_journeyaccepted" ).fadeIn();

           });
           
        });
    }
    function request_decline() {

        $.get( "http://250taxi.com/db/partner/taxi_comlink_journey.php?task=decline&id_no="+id_no+"",  function( data ) {
            document.getElementById('view_taxi_journeyrequest').style.display = 'none';
            document.getElementById('view_taxi_journeyaccepted').style.display = 'none';
            document.getElementById('view_taxi_waiting').style.display = 'block';
        });
    }
    
    
    
    
function native_navigation() {
    
launchnavigator.navigate(
  ""+passenger_gps_lat+", "+passenger_gps_long+"",
  null,
  function(){
      console.log("launchnavigator Plugin success");
  },
  function(error){
      console.log("Plugin error: "+ error);
  });

cordova.plugins.notification.local.schedule({
    title: "Back to 250TAXI Partner",
    message: "Tap to open the app."
    // sound: "file://sounds/message.mp3",
    // icon: "http://my.domain.de/avatar/user#id=123"
});
    
}


</script>
    
    
    
    

    
<div id="view_taxi_journeyaccepted">
    
<div id="passenger_on_map"></div>
    
<div class="row">
        <div class="col s12">
          <div class="card">
            <div class="card-content">

        <span style="display:none;">Client Location: <span id="ja_client_location">Loading...</span></span>
                
        Additional Instructions: <span id="ja_client_instructions">Not given</span><br>
        <span>Client Destination: <span id="ja_client_destination">Loading...</span></span>

            </div>
              
      
                
              <div onclick="native_navigation();" class="waves-effect waves-light btn black">   
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z" />
</svg> Navigate</div>
              <br><br>
                
                
<span id="phone_button"><a id="phone_button_tel" href=""><div class="waves-effect waves-light btn black">   
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
<path fill="#FFFFFF" d="M4,3A1,1 0 0,0 3,4A17,17 0 0,0 20,21A1,1 0 0,0 21,20V16.5A1,1 0 0,0 20,15.5C18.75,15.5 17.55,15.3 16.43,14.93C16.08,14.82 15.69,14.9 15.41,15.17L13.21,17.37C10.38,15.93 8.06,13.62 6.62,10.78L8.82,8.57C9.1,8.31 9.18,7.92 9.07,7.57C8.7,6.45 8.5,5.25 8.5,4A1,1 0 0,0 7.5,3H4M15,3V4.5H18.5L13,10L14,11L19.5,5.5V9H21V3H15Z" />
</svg> 
<span class="lang_show english">Call</span>
<span class="lang_show rwanda">HAMAGARA</span>            
</div></a></span>
                
                
<div onclick="chat();" class="waves-effect waves-light btn black">
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9H18V11H6M14,14H6V12H14M18,8H6V6H18" />
</svg>   
<span class="lang_show english">Chat</span>
<span class="lang_show rwanda">UBUTUMWA BUGUFI</span>
</div>
                
<div style="display:none;" onclick="request_decline();" class="waves-effect waves-light btn red">   
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z" />
</svg>
Cancel
</div>
                
     <br>        <br>     
                
    
              
          </div>
        </div>
      </div>
    

    
</div>
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
<!-- Corporate Login Start -->
    
<style>
.modal250_title {
        font-family: Roboto, sans-serif;
	    font-size: 22px;
        text-align: center;
        color: white;
        margin-top: 20px;
        margin-bottom: 20px;
}
.modal250_cancel_button {
        font-family: Roboto, sans-serif;
	    font-size: 14px;
        text-align: center;
        color: white;
        width: 100%;
        padding-top: 10px;
        padding-bottom: 8px;
        margin-top: 15px;
        margin-bottom: 15px;
}
.modal250 {
    position: absolute;
    width: 80%;
    left: 10%;
    top: 5%;
    background-color: #424242;
    box-shadow: 2px 2px 6px 0.7px rgba(0,0,0,0.5);
}
.modal250bg {
    display: none;
    background-color: rgba(0,0,0,0.2);
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    z-index: 100000;
}
body {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
</style>

<!-- modal250 Start -->
<div class="modal250bg" id="corporate_login_start">
<div class="modal250 animated zoomIn">

    <div class="modal250_title">Corporate Login</div>
    
    <div onclick="localStorage.setItem('corporate_login_type','hotel');corporate_login_start();" class="modal250_cancel_button">
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M19,7H11V14H3V5H1V20H3V17H21V20H23V11A4,4 0 0,0 19,7M7,13A3,3 0 0,0 10,10A3,3 0 0,0 7,7A3,3 0 0,0 4,10A3,3 0 0,0 7,13Z" />
</svg>  
        
<span class="lang_show english">Hotel Account</span>
<span class="lang_show rwanda">AMAHOTELI</span>
        
        
    
    
    </div>

    <div onclick="localStorage.setItem('corporate_login_type','corporate');corporate_login_start();" class="modal250_cancel_button">
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M14,6H10V4H14M20,6H16V4L14,2H10L8,4V6H4C2.89,6 2,6.89 2,8V19A2,2 0 0,0 4,21H20A2,2 0 0,0 22,19V8C22,6.89 21.1,6 20,6Z" />
</svg> 
        
        <span class="lang_show english">Corporate Account</span>
<span class="lang_show rwanda">IBIGO</span>
        </div>
    
    <div style="padding: 5px; background-color: lightgrey;">
        
    <div onclick="$('#corporate_login_start').fadeOut('slow');" class="modal250_cancel_button" style="color: black;">Cancel</div>
    </div>

</div>
</div>
<!-- modal250 End -->
    
<!-- modal250 Start -->
<div class="modal250bg" id="hotel_card_menu">
<div class="modal250 animated zoomIn">

    <div class="modal250_title">Card Management</div>
    
    <div style="display:none;" onclick="hotel_card_deactivate_test();" class="modal250_cancel_button">Test</div>
    
    <div onclick="hotel_card_menu_scancode_activate();" class="modal250_cancel_button">
        
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M4,4H10V10H4V4M20,4V10H14V4H20M14,15H16V13H14V11H16V13H18V11H20V13H18V15H20V18H18V20H16V18H13V20H11V16H14V15M16,15V18H18V15H16M4,20V14H10V20H4M6,6V8H8V6H6M16,6V8H18V6H16M6,16V18H8V16H6M4,11H6V13H4V11M9,11H13V15H11V13H9V11M11,6H13V10H11V6M2,2V6H0V2A2,2 0 0,1 2,0H6V2H2M22,0A2,2 0 0,1 24,2V6H22V2H18V0H22M2,18V22H6V24H2A2,2 0 0,1 0,22V18H2M22,22V18H24V22A2,2 0 0,1 22,24H18V22H22Z" />
</svg> 
        
        Activate Card</div>

    <div onclick="hotel_card_menu_scancode_deactivate();" class="modal250_cancel_button">
        
<svg style="width:24px;height:24px;vertical-align:middle;" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M4,4H10V10H4V4M20,4V10H14V4H20M14,15H16V13H14V11H16V13H18V11H20V13H18V15H20V18H18V20H16V18H13V20H11V16H14V15M16,15V18H18V15H16M4,20V14H10V20H4M6,6V8H8V6H6M16,6V8H18V6H16M6,16V18H8V16H6M4,11H6V13H4V11M9,11H13V15H11V13H9V11M11,6H13V10H11V6M2,2V6H0V2A2,2 0 0,1 2,0H6V2H2M22,0A2,2 0 0,1 24,2V6H22V2H18V0H22M2,18V22H6V24H2A2,2 0 0,1 0,22V18H2M22,22V18H24V22A2,2 0 0,1 22,24H18V22H22Z" />
</svg> 
        
        Deactivate Card<br>(Clear Balance)</div>
    
    <div style="padding: 5px; background-color: lightgrey;">
        
    <div onclick="location.reload();" class="modal250_cancel_button" style="color: black;">Done</div>
    </div>

</div>
</div>
<!-- modal250 End -->
    
<!-- modal250 Start -->
<div class="modal250bg" id="hotel_card_activation_form">
<div class="modal250 animated zoomIn">

<div class="modal250_title">Card Activation</div>

<form action="javascript:hotel_card_activation_complete();" id="hotel_card_activation" name="hotel_card_activation" class="card_form">
<input required id="hotel_card_activation_guest_name" type="text" placeholder="Guest Name">
<input required id="hotel_card_activation_guest_email" type="email" placeholder="Guest E-Mail">
<input required id="hotel_card_activation_guest_room_number" type="text" placeholder="Guest Room Number">
<input required id="hotel_card_activation_guest_phone_number" type="text" placeholder="Guest Phone">
<input required id="hotel_card_activation_guest_check_in_date" type="date" placeholder="Check-in Date">
<input required id="hotel_card_activation_guest_check_out_date" type="date" placeholder="Check-Out Date">
<input required id="hotel_card_activation_pin" type="tel" minlength="4" maxlength="4" placeholder="PIN" pattern="\d*">
    
<input id="hotel_card_activation_submit_handle" type="submit" style="display: none">

<a onclick="setTimeout(function(){ $('#hotel_card_activation_submit_handle').click(); }, 1000);" class="waves-effect waves-light btn black grey-text">Activate</a>
<br><br>
    
</form>
    
</div>
</div>
<!-- modal250 End -->
    
    
<!-- modal250 Start -->
<div class="modal250bg" id="hotel_card_deactivation">
<div class="modal250 animated zoomIn">

    <div class="modal250_title">Card Deactivation</div>
    
    <form class="card_form">
    <div style="color: white;">
    Payment due for guest: <span id="hotel_card_deactivation_guest_name"></span>
    </div>
    <input style="pointer-events:none;" id="hotel_card_deactivation_payment_due" type="text" value="5000">
        
    <div onclick="setTimeout(function(){ hotel_card_deactivation_complete(); }, 1000);" class="waves-effect waves-light btn black grey-text">Deactivate</div>
        
    <br><br>
        
    <div onclick="setTimeout(function(){ hotel_card_deactivation_cancel(); }, 1000);" class="waves-effect waves-dark btn white grey-text">Cancel</div>
        
<br><br>
    </form>

</div>
</div>
<!-- modal250 End -->
    
    
    

<div id="chat_overlay">
   
<div id="chat_overlay_close" onclick="close_chat();">
<svg style="width:24px;height:24px" viewBox="0 0 24 24">
    <path fill="#FFFFFF" d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z" />
</svg>
</div>
    
<div id="chat_load_messages">

</div>

<input placeholder="Type a message" id="chat_message_input"></input>
<div class="waves-effect waves-light" id="chat_message_send_button"></div>

</div>

</body>
</html>